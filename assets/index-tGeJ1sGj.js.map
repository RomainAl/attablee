{"version":3,"file":"index-tGeJ1sGj.js","sources":["../../node_modules/nosleep.js/src/media.js","../../node_modules/nosleep.js/src/index.js","../../node_modules/engine.io-parser/build/esm/commons.js","../../node_modules/engine.io-parser/build/esm/encodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","../../node_modules/engine.io-parser/build/esm/decodePacket.browser.js","../../node_modules/engine.io-parser/build/esm/index.js","../../node_modules/@socket.io/component-emitter/lib/esm/index.js","../../node_modules/engine.io-client/build/esm/globalThis.browser.js","../../node_modules/engine.io-client/build/esm/util.js","../../node_modules/engine.io-client/build/esm/contrib/parseqs.js","../../node_modules/engine.io-client/build/esm/transport.js","../../node_modules/engine.io-client/build/esm/contrib/yeast.js","../../node_modules/engine.io-client/build/esm/contrib/has-cors.js","../../node_modules/engine.io-client/build/esm/transports/xmlhttprequest.browser.js","../../node_modules/engine.io-client/build/esm/transports/polling.js","../../node_modules/engine.io-client/build/esm/transports/websocket-constructor.browser.js","../../node_modules/engine.io-client/build/esm/transports/websocket.js","../../node_modules/engine.io-client/build/esm/transports/webtransport.js","../../node_modules/engine.io-client/build/esm/transports/index.js","../../node_modules/engine.io-client/build/esm/contrib/parseuri.js","../../node_modules/engine.io-client/build/esm/socket.js","../../node_modules/socket.io-client/build/esm/url.js","../../node_modules/socket.io-parser/build/esm/is-binary.js","../../node_modules/socket.io-parser/build/esm/binary.js","../../node_modules/socket.io-parser/build/esm/index.js","../../node_modules/socket.io-client/build/esm/on.js","../../node_modules/socket.io-client/build/esm/socket.js","../../node_modules/socket.io-client/build/esm/contrib/backo2.js","../../node_modules/socket.io-client/build/esm/manager.js","../../node_modules/socket.io-client/build/esm/index.js","../../src/streamvisualizer4Clients.js","../../src/main.js"],"sourcesContent":["module.exports = {\n  webm:\n    \"data:video/webm;base64,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\",\n  mp4:\n    \"data:video/mp4;base64,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\",\n};\n","const { webm, mp4 } = require(\"./media.js\");\n\n// Detect iOS browsers < version 10\nconst oldIOS = () =>\n  typeof navigator !== \"undefined\" &&\n  parseFloat(\n    (\n      \"\" +\n      (/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(\n        navigator.userAgent\n      ) || [0, \"\"])[1]\n    )\n      .replace(\"undefined\", \"3_2\")\n      .replace(\"_\", \".\")\n      .replace(\"_\", \"\")\n  ) < 10 &&\n  !window.MSStream;\n\n// Detect native Wake Lock API support\nconst nativeWakeLock = () => \"wakeLock\" in navigator;\n\nclass NoSleep {\n  constructor() {\n    this.enabled = false;\n    if (nativeWakeLock()) {\n      this._wakeLock = null;\n      const handleVisibilityChange = () => {\n        if (this._wakeLock !== null && document.visibilityState === \"visible\") {\n          this.enable();\n        }\n      };\n      document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n      document.addEventListener(\"fullscreenchange\", handleVisibilityChange);\n    } else if (oldIOS()) {\n      this.noSleepTimer = null;\n    } else {\n      // Set up no sleep video element\n      this.noSleepVideo = document.createElement(\"video\");\n\n      this.noSleepVideo.setAttribute(\"title\", \"No Sleep\");\n      this.noSleepVideo.setAttribute(\"playsinline\", \"\");\n\n      this._addSourceToVideo(this.noSleepVideo, \"webm\", webm);\n      this._addSourceToVideo(this.noSleepVideo, \"mp4\", mp4);\n\n      this.noSleepVideo.addEventListener(\"loadedmetadata\", () => {\n        if (this.noSleepVideo.duration <= 1) {\n          // webm source\n          this.noSleepVideo.setAttribute(\"loop\", \"\");\n        } else {\n          // mp4 source\n          this.noSleepVideo.addEventListener(\"timeupdate\", () => {\n            if (this.noSleepVideo.currentTime > 0.5) {\n              this.noSleepVideo.currentTime = Math.random();\n            }\n          });\n        }\n      });\n    }\n  }\n\n  _addSourceToVideo(element, type, dataURI) {\n    var source = document.createElement(\"source\");\n    source.src = dataURI;\n    source.type = `video/${type}`;\n    element.appendChild(source);\n  }\n\n  get isEnabled() {\n    return this.enabled;\n  }\n\n  enable() {\n    if (nativeWakeLock()) {\n      return navigator.wakeLock\n        .request(\"screen\")\n        .then((wakeLock) => {\n          this._wakeLock = wakeLock;\n          this.enabled = true;\n          console.log(\"Wake Lock active.\");\n          this._wakeLock.addEventListener(\"release\", () => {\n            // ToDo: Potentially emit an event for the page to observe since\n            // Wake Lock releases happen when page visibility changes.\n            // (https://web.dev/wakelock/#wake-lock-lifecycle)\n            console.log(\"Wake Lock released.\");\n          });\n        })\n        .catch((err) => {\n          this.enabled = false;\n          console.error(`${err.name}, ${err.message}`);\n          throw err;\n        });\n    } else if (oldIOS()) {\n      this.disable();\n      console.warn(`\n        NoSleep enabled for older iOS devices. This can interrupt\n        active or long-running network requests from completing successfully.\n        See https://github.com/richtr/NoSleep.js/issues/15 for more details.\n      `);\n      this.noSleepTimer = window.setInterval(() => {\n        if (!document.hidden) {\n          window.location.href = window.location.href.split(\"#\")[0];\n          window.setTimeout(window.stop, 0);\n        }\n      }, 15000);\n      this.enabled = true;\n      return Promise.resolve();\n    } else {\n      let playPromise = this.noSleepVideo.play();\n      return playPromise\n        .then((res) => {\n          this.enabled = true;\n          return res;\n        })\n        .catch((err) => {\n          this.enabled = false;\n          throw err;\n        });\n    }\n  }\n\n  disable() {\n    if (nativeWakeLock()) {\n      if (this._wakeLock) {\n        this._wakeLock.release();\n      }\n      this._wakeLock = null;\n    } else if (oldIOS()) {\n      if (this.noSleepTimer) {\n        console.warn(`\n          NoSleep now disabled for older iOS devices.\n        `);\n        window.clearInterval(this.noSleepTimer);\n        this.noSleepTimer = null;\n      }\n    } else {\n      this.noSleepVideo.pause();\n    }\n    this.enabled = false;\n  }\n}\n\nmodule.exports = NoSleep;\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach((key) => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data.arrayBuffer().then(toArray).then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, (encoded) => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n","// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE, } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType),\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType),\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1),\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type],\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            if (data instanceof Blob) {\n                // from WebSocket + binaryType \"blob\"\n                return data;\n            }\n            else {\n                // from HTTP long-polling or WebTransport\n                return new Blob([data]);\n            }\n        case \"arraybuffer\":\n        default:\n            if (data instanceof ArrayBuffer) {\n                // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n                return data;\n            }\n            else {\n                // from WebTransport (Uint8Array)\n                return data.buffer;\n            }\n    }\n};\n","import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nimport { ERROR_PACKET, } from \"./commons.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, (encodedPacket) => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nexport function createPacketEncoderStream() {\n    return new TransformStream({\n        transform(packet, controller) {\n            encodePacketToBinary(packet, (encodedPacket) => {\n                const payloadLength = encodedPacket.length;\n                let header;\n                // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n                if (payloadLength < 126) {\n                    header = new Uint8Array(1);\n                    new DataView(header.buffer).setUint8(0, payloadLength);\n                }\n                else if (payloadLength < 65536) {\n                    header = new Uint8Array(3);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 126);\n                    view.setUint16(1, payloadLength);\n                }\n                else {\n                    header = new Uint8Array(9);\n                    const view = new DataView(header.buffer);\n                    view.setUint8(0, 127);\n                    view.setBigUint64(1, BigInt(payloadLength));\n                }\n                // first bit indicates whether the payload is plain text (0) or binary (1)\n                if (packet.data && typeof packet.data !== \"string\") {\n                    header[0] |= 0x80;\n                }\n                controller.enqueue(header);\n                controller.enqueue(encodedPacket);\n            });\n        },\n    });\n}\nlet TEXT_DECODER;\nfunction totalLength(chunks) {\n    return chunks.reduce((acc, chunk) => acc + chunk.length, 0);\n}\nfunction concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n        return chunks.shift();\n    }\n    const buffer = new Uint8Array(size);\n    let j = 0;\n    for (let i = 0; i < size; i++) {\n        buffer[i] = chunks[0][j++];\n        if (j === chunks[0].length) {\n            chunks.shift();\n            j = 0;\n        }\n    }\n    if (chunks.length && j < chunks[0].length) {\n        chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n}\nexport function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n        TEXT_DECODER = new TextDecoder();\n    }\n    const chunks = [];\n    let state = 0 /* State.READ_HEADER */;\n    let expectedLength = -1;\n    let isBinary = false;\n    return new TransformStream({\n        transform(chunk, controller) {\n            chunks.push(chunk);\n            while (true) {\n                if (state === 0 /* State.READ_HEADER */) {\n                    if (totalLength(chunks) < 1) {\n                        break;\n                    }\n                    const header = concatChunks(chunks, 1);\n                    isBinary = (header[0] & 0x80) === 0x80;\n                    expectedLength = header[0] & 0x7f;\n                    if (expectedLength < 126) {\n                        state = 3 /* State.READ_PAYLOAD */;\n                    }\n                    else if (expectedLength === 126) {\n                        state = 1 /* State.READ_EXTENDED_LENGTH_16 */;\n                    }\n                    else {\n                        state = 2 /* State.READ_EXTENDED_LENGTH_64 */;\n                    }\n                }\n                else if (state === 1 /* State.READ_EXTENDED_LENGTH_16 */) {\n                    if (totalLength(chunks) < 2) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 2);\n                    expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else if (state === 2 /* State.READ_EXTENDED_LENGTH_64 */) {\n                    if (totalLength(chunks) < 8) {\n                        break;\n                    }\n                    const headerArray = concatChunks(chunks, 8);\n                    const view = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length);\n                    const n = view.getUint32(0);\n                    if (n > Math.pow(2, 53 - 32) - 1) {\n                        // the maximum safe integer in JavaScript is 2^53 - 1\n                        controller.enqueue(ERROR_PACKET);\n                        break;\n                    }\n                    expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n                    state = 3 /* State.READ_PAYLOAD */;\n                }\n                else {\n                    if (totalLength(chunks) < expectedLength) {\n                        break;\n                    }\n                    const data = concatChunks(chunks, expectedLength);\n                    controller.enqueue(decodePacket(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n                    state = 0 /* State.READ_HEADER */;\n                }\n                if (expectedLength === 0 || expectedLength > maxPayload) {\n                    controller.enqueue(ERROR_PACKET);\n                    break;\n                }\n            }\n        },\n    });\n}\nexport const protocol = 4;\nexport { encodePacket, encodePayload, decodePacket, decodePayload, };\n","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","export const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\n","import { globalThisShim as globalThis } from \"./globalThis.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nexport class TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n    createUri(schema, query = {}) {\n        return (schema +\n            \"://\" +\n            this._hostname() +\n            this._port() +\n            this.opts.path +\n            this._query(query));\n    }\n    _hostname() {\n        const hostname = this.opts.hostname;\n        return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n        if (this.opts.port &&\n            ((this.opts.secure && Number(this.opts.port !== 443)) ||\n                (!this.opts.secure && Number(this.opts.port) !== 80))) {\n            return \":\" + this.opts.port;\n        }\n        else {\n            return \"\";\n        }\n    }\n    _query(query) {\n        const encodedQuery = encode(query);\n        return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n}\n","// imported from https://github.com/unshiftio/yeast\n'use strict';\nconst alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''), length = 64, map = {};\nlet seed = 0, i = 0, prev;\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nexport function encode(num) {\n    let encoded = '';\n    do {\n        encoded = alphabet[num % length] + encoded;\n        num = Math.floor(num / length);\n    } while (num > 0);\n    return encoded;\n}\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nexport function decode(str) {\n    let decoded = 0;\n    for (i = 0; i < str.length; i++) {\n        decoded = decoded * length + map[str.charAt(i)];\n    }\n    return decoded;\n}\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nexport function yeast() {\n    const now = encode(+new Date());\n    if (now !== prev)\n        return seed = 0, prev = now;\n    return now + '.' + encode(seed++);\n}\n//\n// Map each character to its index.\n//\nfor (; i < length; i++)\n    map[alphabet[i]] = i;\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","// browser shim for xmlhttprequest module\nimport { hasCORS } from \"../contrib/has-cors.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\nexport function XHR(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\nexport function createCookieJar() { }\n","import { Transport } from \"../transport.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nimport { createCookieJar, XHR as XMLHttpRequest, } from \"./xmlhttprequest.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\nfunction empty() { }\nconst hasXHR2 = (function () {\n    const xhr = new XMLHttpRequest({\n        xdomain: false,\n    });\n    return null != xhr.responseType;\n})();\nexport class Polling extends Transport {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        this.polling = false;\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n        }\n        /**\n         * XHR supports binary\n         */\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n        if (this.opts.withCredentials) {\n            this.cookieJar = createCookieJar();\n        }\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this.poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this.polling || !this.writable) {\n            let total = 0;\n            if (this.polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    poll() {\n        this.polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this.polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this.poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        const query = this.query || {};\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n    /**\n     * Creates a request.\n     *\n     * @param {String} method\n     * @private\n     */\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd, cookieJar: this.cookieJar }, this.opts);\n        return new Request(this.uri(), opts);\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(uri, opts) {\n        super();\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.method = opts.method || \"GET\";\n        this.uri = uri;\n        this.data = undefined !== opts.data ? opts.data : null;\n        this.create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    create() {\n        var _a;\n        const opts = pick(this.opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this.opts.xd;\n        const xhr = (this.xhr = new XMLHttpRequest(opts));\n        try {\n            xhr.open(this.method, this.uri, true);\n            try {\n                if (this.opts.extraHeaders) {\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this.opts.extraHeaders) {\n                        if (this.opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this.method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            (_a = this.opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this.opts.withCredentials;\n            }\n            if (this.opts.requestTimeout) {\n                xhr.timeout = this.opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                var _a;\n                if (xhr.readyState === 3) {\n                    (_a = this.opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(xhr);\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this.onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this.data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this.onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this.index = Request.requestsCount++;\n            Request.requests[this.index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    onError(err) {\n        this.emitReserved(\"error\", err, this.xhr);\n        this.cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    cleanup(fromError) {\n        if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n            return;\n        }\n        this.xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this.xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this.index];\n        }\n        this.xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    onLoad() {\n        const data = this.xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this.cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this.cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\n","import { globalThisShim as globalThis } from \"../globalThis.js\";\nexport const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const WebSocket = globalThis.WebSocket || globalThis.MozWebSocket;\nexport const usingBrowserWebSocket = true;\nexport const defaultBinaryType = \"arraybuffer\";\n","import { Transport } from \"../transport.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { pick } from \"../util.js\";\nimport { nextTick, usingBrowserWebSocket, WebSocket, } from \"./websocket-constructor.js\";\nimport { encodePacket } from \"engine.io-parser\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class WS extends Transport {\n    /**\n     * WebSocket transport constructor.\n     *\n     * @param {Object} opts - connection options\n     * @protected\n     */\n    constructor(opts) {\n        super(opts);\n        this.supportsBinary = !opts.forceBase64;\n    }\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        if (!this.check()) {\n            // let probe timeout\n            return;\n        }\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws =\n                usingBrowserWebSocket && !isReactNative\n                    ? protocols\n                        ? new WebSocket(uri, protocols)\n                        : new WebSocket(uri)\n                    : new WebSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // always create a new object (GH-437)\n                const opts = {};\n                if (!usingBrowserWebSocket) {\n                    if (packet.options) {\n                        opts.compress = packet.options.compress;\n                    }\n                    if (this.opts.perMessageDeflate) {\n                        const len = \n                        // @ts-ignore\n                        \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n                        if (len < this.opts.perMessageDeflate.threshold) {\n                            opts.compress = false;\n                        }\n                    }\n                }\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    if (usingBrowserWebSocket) {\n                        // TypeError is thrown when passing the second argument on Safari\n                        this.ws.send(data);\n                    }\n                    else {\n                        this.ws.send(data, opts);\n                    }\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        const query = this.query || {};\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n    /**\n     * Feature detection for WebSocket.\n     *\n     * @return {Boolean} whether this transport is available.\n     * @private\n     */\n    check() {\n        return !!WebSocket;\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { nextTick } from \"./websocket-constructor.js\";\nimport { createPacketDecoderStream, createPacketEncoderStream, } from \"engine.io-parser\";\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        // @ts-ignore\n        if (typeof WebTransport !== \"function\") {\n            return;\n        }\n        // @ts-ignore\n        this.transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        this.transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this.transport.ready.then(() => {\n            this.transport.createBidirectionalStream().then((stream) => {\n                const decoderStream = createPacketDecoderStream(Number.MAX_SAFE_INTEGER, this.socket.binaryType);\n                const reader = stream.readable.pipeThrough(decoderStream).getReader();\n                const encoderStream = createPacketEncoderStream();\n                encoderStream.readable.pipeTo(stream.writable);\n                this.writer = encoderStream.writable.getWriter();\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        this.onPacket(value);\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const packet = { type: \"open\" };\n                if (this.query.sid) {\n                    packet.data = `{\"sid\":\"${this.query.sid}\"}`;\n                }\n                this.writer.write(packet).then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            this.writer.write(packet).then(() => {\n                if (lastPacket) {\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this.transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n","import { Polling } from \"./polling.js\";\nimport { WS } from \"./websocket.js\";\nimport { WT } from \"./webtransport.js\";\nexport const transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: Polling,\n};\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    if (str.length > 2000) {\n        throw \"URI too long\";\n    }\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","import { transports } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nimport { defaultBinaryType } from \"./transports/websocket-constructor.js\";\nexport class Socket extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts = {}) {\n        super();\n        this.binaryType = defaultBinaryType;\n        this.writeBuffer = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            uri = parse(uri);\n            opts.hostname = uri.host;\n            opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n            opts.port = uri.port;\n            if (uri.query)\n                opts.query = uri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = opts.transports || [\n            \"polling\",\n            \"websocket\",\n            \"webtransport\",\n        ];\n        this.writeBuffer = [];\n        this.prevBufferLen = 0;\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: false,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        // set on handshake\n        this.id = null;\n        this.upgrades = null;\n        this.pingInterval = null;\n        this.pingTimeout = null;\n        // set on heartbeat\n        this.pingTimeoutTimer = null;\n        if (typeof addEventListener === \"function\") {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this.beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this.beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this.offlineEventListener = () => {\n                    this.onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                addEventListener(\"offline\", this.offlineEventListener, false);\n            }\n        }\n        this.open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        }, this.opts.transportOptions[name]);\n        return new transports[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    open() {\n        let transport;\n        if (this.opts.rememberUpgrade &&\n            Socket.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1) {\n            transport = \"websocket\";\n        }\n        else if (0 === this.transports.length) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        else {\n            transport = this.transports[0];\n        }\n        this.readyState = \"opening\";\n        // Retry with the next transport if the transport is disabled (jsonp: false)\n        try {\n            transport = this.createTransport(transport);\n        }\n        catch (e) {\n            this.transports.shift();\n            this.open();\n            return;\n        }\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this.onDrain.bind(this))\n            .on(\"packet\", this.onPacket.bind(this))\n            .on(\"error\", this.onError.bind(this))\n            .on(\"close\", (reason) => this.onClose(\"transport close\", reason));\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        Socket.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        if (this.upgrades.indexOf(\"webtransport\") !== -1 &&\n            name !== \"webtransport\") {\n            // favor WebTransport\n            this.setTimeoutFn(() => {\n                if (!failed) {\n                    transport.open();\n                }\n            }, 200);\n        }\n        else {\n            transport.open();\n        }\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n        // we check for `readyState` in case an `open`\n        // listener already closed the socket\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            let i = 0;\n            const l = this.upgrades.length;\n            for (; i < l; i++) {\n                this.probe(this.upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            this.resetPingTimeout();\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this.sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this.onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this.upgrades = this.filterUpgrades(data.upgrades);\n        this.pingInterval = data.pingInterval;\n        this.pingTimeout = data.pingTimeout;\n        this.maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this.resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    resetPingTimeout() {\n        this.clearTimeoutFn(this.pingTimeoutTimer);\n        this.pingTimeoutTimer = this.setTimeoutFn(() => {\n            this.onClose(\"ping timeout\");\n        }, this.pingInterval + this.pingTimeout);\n        if (this.opts.autoUnref) {\n            this.pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    onDrain() {\n        this.writeBuffer.splice(0, this.prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this.prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this.getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this.prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    getWritablePackets() {\n        const shouldCheckPayloadSize = this.maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this.maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    send(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this.onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    onError(err) {\n        Socket.priorWebsocketSuccess = false;\n        this.emitReserved(\"error\", err);\n        this.onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this.pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (typeof removeEventListener === \"function\") {\n                removeEventListener(\"beforeunload\", this.beforeunloadEventListener, false);\n                removeEventListener(\"offline\", this.offlineEventListener, false);\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this.prevBufferLen = 0;\n        }\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        let i = 0;\n        const j = upgrades.length;\n        for (; i < j; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\nSocket.protocol = protocol;\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\nconst RESERVED_EVENTS = [\n    \"connect\",\n    \"connect_error\",\n    \"disconnect\",\n    \"disconnecting\",\n    \"newListener\",\n    \"removeListener\", // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                return this.encodeAsBinary({\n                    type: obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK,\n                    nsp: obj.nsp,\n                    data: obj.data,\n                    id: obj.id,\n                });\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n// see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            const isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n            if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n                packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return isObject(payload);\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || isObject(payload);\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return (Array.isArray(payload) &&\n                    (typeof payload[0] === \"number\" ||\n                        (typeof payload[0] === \"string\" &&\n                            RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n            this.reconstructor = null;\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        /**\n         * A sequence to generate the ID of the {@link QueuedPacket}.\n         * @private\n         */\n        this._queueSeq = 0;\n        this.ids = 0;\n        /**\n         * A map containing acknowledgement handlers.\n         *\n         * The `withError` attribute is used to differentiate handlers that accept an error as first argument:\n         *\n         * - `socket.emit(\"test\", (err, value) => { ... })` with `ackTimeout` option\n         * - `socket.timeout(5000).emit(\"test\", (err, value) => { ... })`\n         * - `const value = await socket.emitWithAck(\"test\")`\n         *\n         * From those that don't:\n         *\n         * - `socket.emit(\"test\", (value) => { ... });`\n         *\n         * In the first case, the handlers will be called with an error when:\n         *\n         * - the timeout is reached\n         * - the socket gets disconnected\n         *\n         * In the second case, the handlers will be simply discarded upon disconnection, since the client will never receive\n         * an acknowledgement from the server.\n         *\n         * @private\n         */\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = this.io.engine &&\n            this.io.engine.transport &&\n            this.io.engine.transport.writable;\n        const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);\n        if (discardPacket) {\n        }\n        else if (this.connected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        const fn = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, args);\n        };\n        fn.withError = true;\n        this.acks[id] = fn;\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        return new Promise((resolve, reject) => {\n            const fn = (arg1, arg2) => {\n                return arg1 ? reject(arg1) : resolve(arg2);\n            };\n            fn.withError = true;\n            args.push(fn);\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this._queueSeq++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n                // the packet has already been acknowledged\n                return;\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n    _drainQueue(force = false) {\n        if (!this.connected || this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending && !force) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n        this._clearAcks();\n    }\n    /**\n     * Clears the acknowledgement handlers upon disconnection, since the client will never receive an acknowledgement from\n     * the server.\n     *\n     * @private\n     */\n    _clearAcks() {\n        Object.keys(this.acks).forEach((id) => {\n            const isBuffered = this.sendBuffer.some((packet) => String(packet.id) === id);\n            if (!isBuffered) {\n                // note: handlers that do not accept an error as first argument are ignored here\n                const ack = this.acks[id];\n                delete this.acks[id];\n                if (ack.withError) {\n                    ack.call(this, new Error(\"socket has been disconnected\"));\n                }\n            }\n        });\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowledgement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (typeof ack !== \"function\") {\n            return;\n        }\n        delete this.acks[packet.id];\n        // @ts-ignore FIXME ack is incorrectly inferred as 'never'\n        if (ack.withError) {\n            packet.data.unshift(null);\n        }\n        // @ts-ignore\n        ack.apply(this, packet.data);\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n        this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { Socket as Engine, installTimerFunctions, nextTick, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        const onError = (err) => {\n            this.cleanup();\n            this._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                this.maybeReconnectOnOpen();\n            }\n        };\n        // emit `error`\n        const errorSub = on(socket, \"error\", onError);\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                onError(new Error(\"timeout\"));\n                socket.close();\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        else if (this._autoConnect && !socket.active) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n        if (this.engine)\n            this.engine.close();\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called upon engine close.\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        this.cleanup();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\n","// TODO -> Module or Class !!!\nconst SMOOTHING = 1.0;\nexport default function StreamVisualizer4Clients(analyser, canvas) {\n  this.canvas = canvas;\n  this.drawContext = this.canvas.getContext('2d');\n  this.analyser = analyser;\n  this.myColor = 'white';\n  this.rectSize = 10;\n  this.rectSize_ = this.rectSize;\n  this.gain = 1.0;\n  this.FFT_SIZE = 512;\n  this.analyser.fftSize = this.FFT_SIZE;\n  this.analyser.smoothingTimeConstant = SMOOTHING;\n  this.times = new Uint8Array(this.analyser.frequencyBinCount);\n  this.startTime = 0;\n  this.startOffset = 0;\n  this.goStroke = false;\n  this.rand = 0;\n}\n\nStreamVisualizer4Clients.prototype.start = function() {\n  this.myAnim = requestAnimationFrame(this.draw.bind(this));\n};\n\nStreamVisualizer4Clients.prototype.stop = function() {\n  this.drawContext.clearRect(0, 0, this.canvas.width, this.canvas.height);\n  cancelAnimationFrame(this.myAnim);\n};\n\nStreamVisualizer4Clients.prototype.setColor = function(col) {\n  this.myColor = col;\n};\n\nStreamVisualizer4Clients.prototype.setSize = function(size) {\n  this.rectSize = size;\n};\n\nStreamVisualizer4Clients.prototype.setGAIN = function(gain) {\n  this.gain = gain;\n};\n\nStreamVisualizer4Clients.prototype.setStroke = function(goStroke) {\n  this.goStroke = goStroke;\n};\n\nStreamVisualizer4Clients.prototype.setFFT_SIZE = function(FFT_SIZE) {\n  this.FFT_SIZE = FFT_SIZE;\n  this.analyser.fftSize = FFT_SIZE;\n};\n\nStreamVisualizer4Clients.prototype.setRAND = function(rand) {\n  this.rand = rand;\n};\n\nStreamVisualizer4Clients.prototype.draw = function() {\n  this.analyser.getByteTimeDomainData(this.times);\n  if (Math.random()*this.rand < 0.1) this.drawContext.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n  let meanVal = 0;\n  let barWidth;\n  let value;\n  if (this.goStroke){\n    for (let i = 0; i < this.analyser.frequencyBinCount; i++) {\n      value = (this.times[i] / 256)-0.5;\n      let y = Math.min(Math.max(value * this.canvas.height * this.gain + this.canvas.height*0.5,0),this.canvas.height) - this.rectSize/2;\n      value = Math.abs(value);\n      barWidth = this.canvas.width/this.analyser.frequencyBinCount;\n      this.drawContext.strokeStyle = this.myColor; //'hsl(' + (1-2*value)*500 + ', 100%, 50%)';\n      this.drawContext.strokeRect(i * barWidth, y, this.rectSize_*(1-value), this.rectSize_*(1-value));\n      this.drawContext.lineWidth = value*value*value*value*10000;\n    }\n  } else {\n    for (let i = 0; i < this.analyser.frequencyBinCount; i++) {\n      value = (this.times[i] / 256)-0.5;\n      if (Math.abs(value) < 0.01) value = 0;\n      meanVal += Math.abs(value);\n      let y = Math.min(Math.max(value * this.canvas.height * this.gain + this.canvas.height*0.5,0),this.canvas.height) - this.rectSize/2;\n      barWidth = this.canvas.width/this.analyser.frequencyBinCount;\n      this.drawContext.fillStyle = this.myColor;\n      this.drawContext.fillRect(i * barWidth, y, this.rectSize_, this.rectSize_);\n    }\n  }\n  meanVal /= this.analyser.frequencyBinCount;\n  if (meanVal > 0.25) {\n    this.rectSize_ = this.rectSize*2;\n  } else {\n    this.rectSize_ = this.rectSize;\n  };\n  requestAnimationFrame(this.draw.bind(this));\n};","import './style.css';\nimport NoSleep from 'nosleep.js';\nimport { io } from 'socket.io-client';\nimport StreamVisualizer4Clients from './streamvisualizer4Clients.js'\nif (location.protocol !== 'https:') {\n  alert(\"Go https !\");\n  location.replace(`https:${location.href.substring(location.protocol.length)}`);\n}\n\nconst socket = io.connect(\"https://mywebrtcserver-thrumming-resonance-5604.fly.dev/\");\n// const socket = io.connect(\"https://192.168.10.2:1337\");\nconsole.log(\"Flyio ok\");\n\nconst userCanvas = document.getElementById(\"canvas\");\nuserCanvas.width = Math.max(window.innerWidth,window.innerHeight)*2;\nuserCanvas.height = Math.min(window.innerWidth,window.innerHeight)*2;\nconst adminVideo = document.getElementById(\"video\");\n// let adminVimeo = document.getElementById(\"vimeo\");\nadminVideo.style.display = \"none\";\nconst adminVideo_webrtc = document.getElementById(\"video_webrtc\");\nadminVideo_webrtc.style.display = \"none\";\nconst audio_nico = document.getElementById(\"audio_nico\");\naudio_nico.src = `./audios/LXR-1.wav`;\n// audio_nico.src = `./audio4Client/LXR-.wav`;\naudio_nico.muted = false;\n// let vimeo = new Vimeo.Player('vimeo');\nconst effectsPan = document.getElementById(\"effects-params\");\neffectsPan.style.display = \"none\";\nconst gainPan = document.getElementById(\"gain-param\");\ngainPan.style.display = \"none\";\nconst BtnsPan = document.getElementById(\"Btns\");\nconst overlay = document.getElementById('overlay');\nconst overlayTHEEND = document.getElementById('overlayTHEEND');\nconst overlayWAIT = document.getElementById(\"overlayWAIT\");\nconst myGUI = document.getElementById(\"GUI\");\nconst atablee = document.getElementById(\"atablee\");\nconst btn_fullscreen = document.getElementById(\"btn_fullscreen\");\nlet fullscreenElement = document.fullscreenElement || document.webkitFullscreenElement;\nif (fullscreenElement===undefined) btn_fullscreen.style.display = 'none';\nconst btn_gain = document.getElementById(\"btn_gain\");\nconst btn_rec = document.getElementById(\"btn_rec\");\nbtn_rec.style.background = \"transparent\";\nbtn_rec.onclick = recfunction;\nconst rec = document.getElementById(\"rec\");\nconst mystop = document.getElementById(\"stop\");\nconst trash = document.getElementById(\"trash\");\nconst btn_effects = document.getElementById(\"btn_effects\");\nbtn_fullscreen.onclick = changeFullScreen;\nbtn_effects.style.borderColor = \"#5c5c5c\";\nbtn_rec.style.borderColor = \"#5c5c5c\";\nbtn_effects.onclick = (ev)=>{\n  if (effectsPan.style.display == \"flex\"){\n    effectsPan.style.display = \"none\";\n    btn_effects.style.background = \"transparent\";\n  } else {\n    effectsPan.style.display = \"flex\";\n    btn_effects.style.backgroundColor = \"#5c5c5c\";\n    gainPan.style.display = 'none';\n    btn_gain.style.background = \"transparent\";\n  }\n}\nbtn_gain.onclick = (ev)=>{\n  if (gainPan.style.display == 'flex'){\n    gainPan.style.display = 'none';\n    btn_gain.style.background = \"transparent\";\n  } else {\n    effectsPan.style.display = \"none\";\n    btn_effects.style.background = \"transparent\";\n    gainPan.style.display = 'flex';\n    btn_gain.style.backgroundColor = \"#5c5c5c\";\n  }\n}\nconst startButton = document.getElementById( 'startButton' );\nstartButton.onclick = ()=>init();\noverlay.ondblclick = ()=>{\n  goBackHome();\n  location.reload();\n}\n\nBtnsPan.ondblclick = adminID;\ndocument.body.ondblclick = adminID;\nadminVideo.ondblclick = adminID;\nadminVideo_webrtc.ondblclick = adminID;\nuserCanvas.ondblclick = adminID;\nfunction adminID(e){\n    changeFullScreen();\n    console.log(rtcPeerConnection.signalingState);\n    if (sendChannel.readyState === 'open') {\n      sendChannel.send(JSON.stringify({clientId: myID}));\n    }\n}\n// let btn_test = document.getElementById(\"btn_test\");\n// let testBool = true;\n// btn_test.onclick = testBtn;\n\nnavigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate; \nlet streamVisualizer4Clients;\nlet myID;\nlet roomName = \"!?ATtablee007!?\";\nlet rtcPeerConnection;\nlet receiveChannel;\nlet sendChannel;\nlet userCanvasStream = userCanvas.captureStream(0); // BECAUSE ON SAFARI, NEED TO HAVE VIDEO STREAM TO RECEIVE A VIDEO STREAM !\nlet wakeLock = null;\nlet noSleep = new NoSleep();\nlet AudioContext = window.AudioContext || window.webkitAudioContext;\nlet context;\nlet analyser;\nlet source;\nlet source_mic = null;\nlet gain;\nlet myPeer;\nlet audio_nico_source;\nlet timer_rec;\nlet timer_nico;\nlet gain_nico;\nlet isDraggingSlider = false;\n\nconst displayAllEffectsParams = false;\nlet effects_loaded = false;\n\nconst filter = {\n  name: \"filter\",\n  title: \"FILTER\",\n  device: null,\n  div: null,\n  activ: true,\n  visible: false,\n  gain: null,\n  userParams: [\n    {\n      name: \"FREQ\",\n      title: \"FREQ\",\n      defaultValue: null,\n      param: null,\n      visible: false,\n      type: \"real\"\n    },\n    {\n      name: \"Q\",\n      title: \"Q\",\n      defaultValue: null,\n      param: null,\n      visible: false,\n      type: \"real\"\n    }\n  ]\n};\n\nconst effects = [\n  // {\n  //   name: \"nico01\",\n  //   title: \"nico01\",\n  //   device: {},\n  //   div: {},\n  //   activ: true,\n  //   visible: true,\n  //   gain: null,\n  //   userParams: [\n  //   {\n  //     name: \"CLEAR\",\n  //     title: \"CLEAR\",\n  //     defaultValue: null,\n  //     param: {},\n  //     visible: true,\n  //     type: \"real\"\n  //   },\n  //   {\n  //     name: \"START\",\n  //     title: \"START\",\n  //     defaultValue: null,\n  //     param: {},\n  //     visible: true,\n  //     type: \"real\"\n  //   }\n  //   ],\n  // },\n  {\n    name: \"delay\",\n    title: \"ECHOS\",\n    device: null,\n    div: null,\n    activ: false,\n    visible: true,\n    gain: null,\n    userParams: [\n    {\n      name: \"input\",\n      title: \"IN\",\n      defaultValue: 1.0,\n      param: null,\n      visible: false,\n      type: \"bool\"\n    },\n    {\n      name: \"time\",\n      title: \"TIME\",\n      defaultValue: 30.0,\n      param: null,\n      visible: true,\n      type: \"real\"\n    }\n    ],\n  },\n  {\n    name: \"disto\",\n    title: \"DISTORSION\",\n    device: null,\n    div: null,\n    activ: false,\n    visible: true,\n    gain: null,\n    userParams: [\n      {\n        name: \"drive\",\n        title: \"DISTO\",\n        defaultValue: 20.0,\n        param: null,\n        visible: true,\n        type: \"real\"\n      },{\n        name: \"mix\",\n        title: \"MIX\",\n        defaultValue: 100.0,\n        param: null,\n        visible: false,\n        type: \"real\"\n      },{\n        name: \"midfreq\",\n        title: \"MIDFREQ\",\n        defaultValue: 0.0,\n        param: null,\n        visible: false,\n        type: \"real\"\n      },{\n        name: \"treble\",\n        title: \"TREBLE\",\n        defaultValue: 50.0,\n        param: null,\n        visible: false,\n        type: \"real\"\n      },{\n        name: \"mid\",\n        title: \"MID\",\n        defaultValue: 100.0,\n        param: null,\n        visible: false,\n        type: \"real\"\n      },{\n        name: \"bass\",\n        title: \"BASS\",\n        defaultValue: 50.0,\n        param: null,\n        visible: false,\n        type: \"real\"\n      },\n  ],\n  },\n  {\n    name: \"downsample\",\n    title: \"DEGRADATION\",\n    device: null,\n    div: null,\n    activ: false,\n    visible: true,\n    gain: null,\n    userParams: [\n    {\n      name: \"down-sample\",\n      title: \"DOWN-SAMPLE\",\n      defaultValue: 10,\n      param: null,\n      visible: true,\n      type: \"real\"\n    }],\n  },\n  {\n    name: \"reverb\",\n    title: \"REVERBERATION\",\n    device: null,\n    div: null,\n    activ: false,\n    visible: true,\n    gain: null,\n    userParams: [\n      {\n        name: \"decay\",\n        title: \"DECAY\",\n        defaultValue: null,\n        param: null,\n        visible: true,\n        type: \"real\"\n      },{\n        name: \"mix\",\n        title: \"MIX\",\n        defaultValue: 100.0,\n        param: null,\n        visible: false,\n        type: \"real\"\n      },\n    ],\n  },\n  {\n     name: \"pitchshift\",\n     title: \"HAUTEUR\",\n     device: null,\n     div: null,\n     activ: false,\n     visible: true,\n     gain: null,\n     userParams: [\n       {\n         name: \"transp\",\n         title: \"TRANSPOSITION\",\n         defaultValue: null,\n         param: null,\n         visible: true,\n         type: \"real\"\n       },\n       {\n         name: \"mix\",\n         title: \"MIX\",\n         defaultValue: 100.0,\n         param: null,\n         visible: false,\n         type: \"real\"\n       },\n     ],\n   },\n  {\n    name: \"freeze\",\n    title: \"FREEZE (AUTO)\",\n    device: null,\n    div: null,\n    activ: false,\n    visible: true,\n    gain: null,\n    userParams: [\n      {\n        name: \"auto\",\n        title: \"AUTO\",\n        defaultValue: 100.0,\n        param: null,\n        visible: false,\n        type: \"bool\"\n      },\n    ],\n  },\n  {\n    name: \"sampler\",\n    title: \"SAMPLER\",\n    device: null,\n    div: null,\n    activ: false,\n    visible: false,\n    gain: null,\n    userParams: [\n      {\n        name: \"pitch\",\n        title: \"VITESSE\",\n        defaultValue: 1.0,\n        param: null,\n        visible: true,\n        type: \"real\"\n      },\n      {\n        name: \"metro_speed\",\n        title: \"LECTURE ALEATOIRE\",\n        defaultValue: null,\n        param: null,\n        visible: true,\n        type: \"real\"\n      },\n      {\n        name: \"size\",\n        title: \"SIZE\",\n        defaultValue: 20.0,\n        param: null,\n        visible: false,\n        type: \"real\"\n      }],\n  }\n];\n\n// Contains the stun server URL we will be using.\nlet iceServers = {\n  iceServers: [\n    { urls: \"stun:stun.services.mozilla.com\" },\n    { urls: \"stun:stun.l.google.com:19302\" },\n  ],\n};\n// let iceServers;\n// async function create_iceServers() {\n//   const response = \n//     await window.fetch(\"https://ludicke.metered.live/api/v1/turn/credentials?apiKey=5384caa827c45b8e5c34576216e80a7430ce\");\n\n//   // Saving the response in the iceServers array\n//   iceServers = await response.json();\n// }\n// create_iceServers();\n\nconst offerOptions = {\n  offerToReceiveAudio: 1,\n  offerToReceiveVideo: 1,\n  voiceActivityDetection: false\n};\n\nconst constraints = {\n  audio: {\n    sampleRate: 44100,\n    sampleSize: 16,\n    noiseSuppression: false,\n    echoCancellation: false,\n    channelCount: 1,\n    autoGainControl: true,\n    volume: 1\n},\n  video: false,\n};\n\nfunction init() {\n  requestWakeLock();\n  document.getElementById(\"startButton\").classList.add(\"spinner\");\n  document.getElementById(\"startButton\").disabled = true;\n  context = new AudioContext();\n  if (myPeer) myPeer = null;\n  myPeer = context.createMediaStreamDestination();\n  analyser = context.createAnalyser();\n  gain = context.createGain();\n  gain.gain.value = 1.0;\n  document.getElementById(\"gain\").addEventListener(\"input\", (event) => {\n    gain.gain.value = event.target.value;\n    if (event.target.value < 0.1) {\n      document.getElementById(\"g2\").style.display = 'inline-block';\n      document.getElementById(\"g1\").style.display = 'none';\n    } else {\n      document.getElementById(\"g1\").style.display = 'inline-block';\n      document.getElementById(\"g2\").style.display = 'none';\n    }\n  });\n  gain_nico = context.createGain();\n  gain_nico.gain.value = 0.0;\n  if (!audio_nico_source) {\n    audio_nico_source = context.createMediaElementSource(audio_nico);\n    audio_nico_source.connect(gain_nico);\n  };\n  gain_nico.connect(analyser);\n  clearInterval(timer_nico);\n  adminVideo.muted = false;\n  adminVideo.pause();\n  adminVideo.volume = 0.0;\n  audio_nico.play();\n  adminVideo_webrtc.muted = false;\n  // adminVideo_webrtc.volume = 0.0;\n  // adminVideo_webrtc.play();\n  // audio_nico.muted = false;\n  // adminVideo.volume = 0.0;\n  // audio_nico.volume = 0.0;\n  console.log(socket.id);\n  socket.connect();\n  console.log(socket.id);\n  socket.emit(\"join\", roomName, false);\n};\n\n// Triggered when a room is succesfully created.\nsocket.on(\"create\", function () {\n  console.log(\"Socket receive create\");\n  rtcPeerConnection = new RTCPeerConnection(iceServers);\n  rtcPeerConnection.onicecandidate = OnIceCandidateFunction;\n  rtcPeerConnection.ontrack = OnTrackFunction;\n  rtcPeerConnection.addTrack(myPeer.stream.getTracks()[0], myPeer.stream);\n  rtcPeerConnection.addTrack(userCanvasStream.getTracks()[0], userCanvasStream);\n  console.log('Adding Local Stream to peer connection');\n  sendChannel = rtcPeerConnection.createDataChannel('mySceneName');\n  sendChannel.onopen = onSendChannelStateChange;\n  sendChannel.onmessage = onSendChannelMessageCallback;\n  sendChannel.onclose = onSendChannelStateChange;\n  rtcPeerConnection.ondatachannel = receiveChannelCallback;\n  rtcPeerConnection.onconnectionstatechange = webrtcStateChange;\n  rtcPeerConnection\n    .createOffer(offerOptions)\n    .then((offer) => {\n      rtcPeerConnection.setLocalDescription(offer);\n      socket.emit(\"offer\", offer);\n      console.log('offer sent');\n    })\n\n    .catch((error) => {\n      console.log(error);\n    });\n});\n\nsocket.on(\"noCreate\", function(){\n  console.log(\"Socket receive noCreate\");\n  socket.disconnect();\n  alert(\"ARF !!! \\nL'administrateur n'est pas connect !\\nRveille-le ! \");\n  location.reload();\n})\n\n// Triggered on receiving an answer from the person who joined the room.\nsocket.on(\"answer\", function (answer) {\n  if (answer == null){\n    goBackHome();\n    alert(\"ARF !!! \\nL'administrateur n'est pas prt !\\nRveille-le ! \");\n    location.reload();\n  } else if (answer == \"stopco\") {\n    goBackHome();\n    alert(\"ZUT !!! \\nIl n'y a plus de place !\\nReviens aprs ! \");\n    location.reload();\n  } else {\n    rtcPeerConnection.setRemoteDescription(answer);\n    myID = socket.id;\n    console.log('answer received');\n    console.log('My ID : ' + myID);\n  }\n});\n\n// Triggered on receiving an ice candidate from the peer.\nsocket.on(\"candidate\", function (candidate) {\n  let icecandidate = new RTCIceCandidate(candidate);\n  rtcPeerConnection.addIceCandidate(icecandidate);\n});\n\nsocket.on(\"disconnect\", (reason) => {\n  console.log('Socket disconnected');\n  console.log(reason);\n  if ((receiveChannel)&&(receiveChannel.readyState != 'open')) {\n    document.getElementById(\"startButton\").disabled = true;\n    document.getElementById(\"startButton\").classList.add(\"spinner\");\n  }\n});\n\nsocket.on(\"connect\", () => {\n  console.log('Socket connected');\n  document.getElementById(\"startButton\").disabled = false;\n  document.getElementById(\"startButton\").classList.remove(\"spinner\");\n});\n\n// Implementing the OnIceCandidateFunction which is part of the RTCPeerConnection Interface.\nfunction OnIceCandidateFunction(event) {\n  console.log(\"Candidate\");\n  if (event.candidate) {\n    socket.emit(\"candidate\", event.candidate, roomName);\n  }\n}\n\n// Implementing the OnTrackFunction which is part of the RTCPeerConnection Interface.\nfunction OnTrackFunction(event) { // TODO : FOR SAFARI ONLY AUDIO !? (BUT IF NO VIDEO FILTER DESYNCH VIDEO/AUDIO ? TO CHECK !)\n  if (adminVideo_webrtc.srcObject !== event.streams[0]) {\n    adminVideo_webrtc.srcObject = event.streams[0];\n  }\n  adminVideo_webrtc.muted = false;\n  console.log(\"On Track\");\n}\n\nfunction receiveChannelCallback(event) {\n  console.log('Receive Channel Callback');\n  receiveChannel = event.channel;\n  receiveChannel.onmessage = onReceiveChannelMessageCallback;\n  receiveChannel.onopen = onReceiveChannelStateChange;\n  receiveChannel.onclose = onReceiveChannelStateChange;\n}\n\nfunction onReceiveChannelMessageCallback(event) {\n  console.log('Received Message : ' + event.data);\n  changeScene(JSON.parse(event.data));\n}\n\nfunction changeScene(data){\n  adminVideo.muted = true;\n  clearInterval(timer_nico);\n  // audio_nico.muted = true;\n  switch (data.scene){\n    case 8:\n      overlay.style.visibility = \"hidden\";\n      overlayTHEEND.style.visibility = \"hidden\";\n      overlayWAIT.style.visibility = \"visible\";\n      atablee.style.display = \"none\";\n      myGUI.style.display = \"none\";\n      adminVideo.pause();\n      adminVideo.volume = 0;\n      adminVideo_webrtc.pause();\n      // adminVideo_webrtc.volume = 0;\n      audio_nico.pause();\n      try{myPeer.stream.getTracks().forEach((track) => {track.stop()});}catch(e){console.log(e)};\n      // try{userCanvasStream.getTracks().forEach((track) => {track.stop()});}catch(e){console.log(e)};\n      // try{rtcPeerConnection.close(); rtcPeerConnection = null;}catch(e){console.log(e)};\n      try{context.suspend();}catch(e){console.log(e)};\n      document.getElementById(\"startButton\").classList.remove(\"spinner\");\n      document.getElementById(\"startButton\").disabled = false;\n      try{streamVisualizer4Clients.stop();}catch(e){console.log(e)};\n      break;\n    case 0:\n      goBackHome();\n      location.reload();\n      break;\n    case 1:\n      if (data.freq){\n        filter.device.parameters.find(p=>p.name==\"FREQ\").value = data.freq;\n      } else {\n\n        if ((!myPeer)||(!myPeer.stream.active)) {\n          myPeer = context.createMediaStreamDestination();\n          let audioSender = rtcPeerConnection.getSenders().find((s) => s.track.kind === \"audio\");\n          audioSender.replaceTrack(myPeer.stream.getTracks()[0]);\n        }\n        if (streamVisualizer4Clients) try { streamVisualizer4Clients.stop(); } catch(e) {console.log(e)};\n        if ((!context) || (context.state=='closed') ){ // TODO\n          console.log('context1 1');\n          context = new AudioContext();\n          let audioSender = rtcPeerConnection.getSenders().find((s) => s.track.kind === \"audio\");\n          audioSender.replaceTrack(myPeer.stream.getTracks()[0]);\n          let videoSender = rtcPeerConnection.getSenders().find((s) => s.track.kind === \"video\");\n          videoSender.replaceTrack(userCanvasStream.getTracks()[0]);\n        } else if (context.state == 'suspended') {\n          console.log('context2 1');\n          context.resume();\n          let audioSender = rtcPeerConnection.getSenders().find((s) => s.track.kind === \"audio\");\n          audioSender.replaceTrack(myPeer.stream.getTracks()[0]);\n          let videoSender = rtcPeerConnection.getSenders().find((s) => s.track.kind === \"video\");\n          videoSender.replaceTrack(userCanvasStream.getTracks()[0]);\n        }\n\n        if (navigator.mediaDevices.getUserMedia === undefined) {\n          navigator.mediaDevices.getUserMedia = function(constraints) {\n        \n            // First get ahold of the legacy getUserMedia, if present\n            var getUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n        \n            // Some browsers just don't implement it - return a rejected promise with an error\n            // to keep a consistent interface\n            if (!getUserMedia) {\n              return Promise.reject(new Error('getUserMedia is not implemented in this browser'));\n            }\n        \n            // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n            return new Promise(function(resolve, reject) {\n              getUserMedia.call(navigator, constraints, resolve, reject);\n            });\n          }\n        }\n        if (!source_mic){\n          navigator.mediaDevices\n            .getUserMedia(constraints)\n            .then(function (stream) {\n              source_mic = stream;\n              source = context.createMediaStreamSource(source_mic);\n              context.suspend();\n              document.getElementById(\"loading-bar\").style.display = \"initial\";\n              if (!effects_loaded){\n                try {removeAllChildNodes(document.getElementById(\"effects-params\"))} catch(e){console.log(e)};\n                effects_Setup(effects)\n                .then(()=>{\n                  filter_Setup(filter).then(()=>{\n                    context.resume();\n                    source.connect(filter.device.node);\n                    nodeConnection(\"auto\");\n                    btn_effects.disabled = false;\n                    btn_effects.style.borderColor = \"white\";\n                    btn_rec.disabled = false;\n                    btn_rec.style.borderColor = \"white\";\n                    atablee.style.display = \"initial\";\n                    userCanvas.style.display = \"initial\";\n                    adminVideo.style.display = \"none\";\n                    adminVideo.muted = true;\n                    adminVideo.play();\n                    adminVideo_webrtc.style.display = \"none\";\n                    // adminVideo_webrtc.volume = 0;\n                    adminVideo_webrtc.pause();\n                    audio_nico.pause();\n                    myGUI.style.display = \"flex\";\n                    document.getElementById(\"loading-bar\").style.display = \"none\";\n                    effects_loaded = true;\n                  });\n                })\n                .catch(function (err) {\n                  try {\n                    context.resume();\n                    console.log(`${err.name}, ${err.message}`);\n                    alert('Dsol, impossible pour ton smartphone de charger les effets sonores !');\n                    source.connect(gain);\n                    gain.connect(analyser);\n                    analyser.connect(myPeer); // TODO\n                    atablee.style.display = \"initial\";\n                    userCanvas.style.display = \"initial\";\n                    adminVideo.style.display = \"none\";\n                    adminVideo.muted = true;\n                    adminVideo.play();\n                    adminVideo_webrtc.style.display = \"none\";\n                    // adminVideo_webrtc.volume = 0;\n                    adminVideo_webrtc.pause();\n                    audio_nico.pause();\n                    myGUI.style.display = \"flex\";\n                    document.getElementById(\"loading-bar\").style.display = \"none\";\n                  } catch (e) { alert(e) };\n                })\n              } else {\n                context.resume();\n                nodeConnection(\"auto\");\n                btn_effects.disabled = false;\n                btn_effects.style.borderColor = \"white\";\n                btn_rec.disabled = false;\n                btn_rec.style.borderColor = \"white\";\n                atablee.style.display = \"initial\";\n                userCanvas.style.display = \"initial\";\n                adminVideo.style.display = \"none\";\n                adminVideo.muted = true;\n                adminVideo.play();\n                adminVideo_webrtc.style.display = \"none\";\n                // adminVideo_webrtc.volume = 0;\n                adminVideo_webrtc.pause();\n                audio_nico.pause();\n                myGUI.style.display = \"flex\";\n                document.getElementById(\"loading-bar\").style.display = \"none\";\n              }\n              const audioTracks = stream.getAudioTracks();\n              if (audioTracks.length > 0) {\n                console.log(`Using Audio device: ${audioTracks[0].label}`);\n              }\n              if (!streamVisualizer4Clients) {\n                streamVisualizer4Clients = new StreamVisualizer4Clients(analyser, canvas);\n              } else {\n                streamVisualizer4Clients.stop();\n                streamVisualizer4Clients.setStroke(false);\n                streamVisualizer4Clients.setSize(10);\n                streamVisualizer4Clients.setFFT_SIZE(512);\n                streamVisualizer4Clients.setGAIN(1);\n              }\n              streamVisualizer4Clients.start();\n              overlay.style.visibility = \"hidden\";\n              overlayTHEEND.style.visibility = \"hidden\";\n              overlayWAIT.style.visibility = \"hidden\";\n            })\n            .catch(function (err) {\n              overlay.style.visibility = \"visible\";\n              overlayTHEEND.style.visibility = \"hidden\";\n              overlayWAIT.style.visibility = \"hidden\";\n              document.getElementById( 'titles' ).style.display = \"none\";\n              document.getElementById( 'err' ).style.display = \"inline-block\";\n              document.getElementById( 'microon' ).style.display = \"none\";\n              document.getElementById( 'microoff' ).style.display = \"inline-block\";\n              atablee.style.display = \"none\";\n              userCanvas.style.display = \"none\";\n              adminVideo.style.display = \"none\";\n              adminVideo.muted = true;\n              adminVideo.play();\n              adminVideo_webrtc.style.display = \"none\";\n              // adminVideo_webrtc.volume = 0;\n              adminVideo_webrtc.pause();\n              audio_nico.pause();\n              if (fullscreenElement===undefined) {\n                myGUI.style.display = \"none\";\n              } else {\n                myGUI.style.display = \"flex\";\n              }\n              if (sendChannel.readyState === 'open') {\n                sendChannel.send(JSON.stringify({clientId: myID, mess: \"NoMic\"}));\n              }\n              console.log(err);\n            })\n          } else {\n            source = context.createMediaStreamSource(source_mic);\n            context.resume();\n            source.connect(filter.device.node);\n            nodeConnection(\"auto\");\n            btn_effects.disabled = false;\n            btn_effects.style.borderColor = \"white\";\n            btn_rec.disabled = false;\n            btn_rec.style.borderColor = \"white\";\n            atablee.style.display = \"initial\";\n            userCanvas.style.display = \"initial\";\n            adminVideo.style.display = \"none\";\n            adminVideo.muted = true;\n            adminVideo.play();\n            adminVideo_webrtc.style.display = \"none\";\n            overlayWAIT.style.visibility = \"hidden\";\n            overlay.style.visibility = \"hidden\";\n            overlayTHEEND.style.visibility = \"hidden\";\n            // adminVideo_webrtc.volume = 0;\n            adminVideo_webrtc.pause();\n            audio_nico.pause();\n            myGUI.style.display = \"flex\";\n            document.getElementById(\"loading-bar\").style.display = \"none\";\n            effects_loaded = true;\n            if (!streamVisualizer4Clients) {\n              streamVisualizer4Clients = new StreamVisualizer4Clients(analyser, canvas);\n            } else {\n              streamVisualizer4Clients.stop();\n              streamVisualizer4Clients.setStroke(false);\n              streamVisualizer4Clients.setSize(10);\n              streamVisualizer4Clients.setFFT_SIZE(512);\n              streamVisualizer4Clients.setGAIN(1);\n            }\n            streamVisualizer4Clients.start();\n          }\n        }\n      break;\n    case 20:\n      try { myPeer.stream.getTracks().forEach((track) => {track.stop();}) } catch(e) {console.log(e)};\n      // rtcPeerConnection.getSenders().forEach(t => rtcPeerConnection.removeTrack(t));\n      if (source_mic) try {source_mic.getTracks().forEach(function(track) {track.stop();}); source_mic= null;} catch(e) {console.log(e)};\n      try {context.suspend()} catch(e) {console.log(e)}\n      // try {effects.forEach(e=>e.device = null) } catch (e){console.log(e)};\n      if (streamVisualizer4Clients) try {streamVisualizer4Clients.stop(); } catch(e) {console.log(e)};\n      atablee.style.display = \"initial\";\n      userCanvas.style.display = \"none\";\n      myGUI.style.display = \"none\";\n      adminVideo.style.display = \"none\";\n      //document.getElementById(\"overlay\").remove(); // TODO\n      adminVideo_webrtc.style.display = \"initial\";\n      // adminVideo_webrtc.volume = 1;\n      adminVideo_webrtc.play();\n      adminVideo.volume = 0;\n      adminVideo.pause();\n      overlay.style.visibility = \"hidden\";\n      overlayTHEEND.style.visibility = \"hidden\";\n      overlayWAIT.style.visibility = \"hidden\";\n      audio_nico.pause();\n      break;\n    case 21:\n      if (data.video){\n        if (data.video===\"R\"){\n          adminVideo.currentTime = Math.random()*0.8*adminVideo.duration;\n          adminVideo.muted = false;\n          adminVideo.volume = 1;\n          adminVideo.play();\n        } else {\n          adminVideo.src = `./videos/video${data.video}.mp4`;\n          if (!data.muted){\n            adminVideo.muted = false;\n            adminVideo.volume = 1;\n          } else {\n            adminVideo.muted = true;\n            adminVideo.volume = 0;\n          }\n          adminVideo.play();\n        }\n      } else {\n        try { myPeer.stream.getTracks().forEach((track) => {track.stop();}) } catch(e) {console.log(e)};\n        // rtcPeerConnection.getSenders().forEach(t => rtcPeerConnection.removeTrack(t));\n        if (source_mic) try {source_mic.getTracks().forEach(function(track) {track.stop();}); source_mic= null;} catch(e) {console.log(e)};\n        try {context.suspend()} catch(e) {console.log(e)}\n        // try { effects.forEach(e=>e.device = null) } catch (e){console.log(e)};\n        if (streamVisualizer4Clients) try { streamVisualizer4Clients.stop(); } catch(e) {console.log(e)};\n        atablee.style.display = \"initial\";\n        userCanvas.style.display = \"none\";\n        myGUI.style.display = \"none\";\n        adminVideo_webrtc.style.display = \"none\";\n        //document.getElementById(\"overlay\").remove(); // TODO\n        // adminVideo_webrtc.volume = 0;\n        adminVideo_webrtc.pause();\n        adminVideo.style.display = \"initial\";\n        adminVideo.loop = true;\n        adminVideo.currentTime = 0;\n        adminVideo.play();\n        adminVideo.muted = false;\n        adminVideo.volume = 1;\n        overlay.style.visibility = \"hidden\";\n        overlayTHEEND.style.visibility = \"hidden\";\n        overlayWAIT.style.visibility = \"hidden\";\n        audio_nico.pause();\n      }\n      break;\n    case 3:\n      try { myPeer.stream.getTracks().forEach((track) => {track.stop();}) } catch(e) {console.log(e)};\n      // rtcPeerConnection.getSenders().forEach(t => rtcPeerConnection.removeTrack(t));\n      if (source_mic) try {source_mic.getTracks().forEach(function(track) {track.stop();}); source_mic= null;} catch(e) {console.log(e)};\n      try {context.suspend()} catch(e) {console.log(e)}\n      // try {effects.forEach(e=>e.device = null) } catch (e){console.log(e)};\n      if (streamVisualizer4Clients) try {streamVisualizer4Clients.stop(); } catch(e) {console.log(e)};\n      atablee.style.display = \"initial\";\n      userCanvas.style.display = \"none\";\n      myGUI.style.display = \"none\";\n      adminVideo.style.display = \"none\";\n      //document.getElementById(\"overlay\").remove(); // TODO\n      adminVideo_webrtc.style.display = \"none\";\n      // adminVideo_webrtc.volume = 1;\n      adminVideo_webrtc.play();\n      adminVideo.volume = 0;\n      adminVideo.pause();\n      overlay.style.visibility = \"hidden\";\n      overlayTHEEND.style.visibility = \"hidden\";\n      overlayWAIT.style.visibility = \"hidden\";\n      audio_nico.pause();\n      break;\n    case 4:\n      setTimeout(()=>{\n        atablee.style.background = \"white\";\n      }, 100);\n      console.log(navigator.vibrate);\n      if (navigator.vibrate){ navigator.vibrate([400, 0, 300, 0, 200, 0, 100].map(function(x) { return (x+200) * Math.random(); })); }\n      setTimeout(()=>{atablee.style.background = \"black\";}, 1500);\n      break;\n    case 5:\n      adminVideo.src = `./videos/video${Math.round(Math.random()*20)+1}.webm`;\n      adminVideo.play();\n      // vimeo.loadVideo(\"978281628\").then(()=>vimeo.play());\n      // vimeo.setCurrentTime(Math.random()*100);\n      // vimeo.on('progress', (e)=>console.log(e.percent));\n      // vimeo.play();\n      break;\n    case 6:\n      if (data.vol){\n        gain_nico.gain.value = data.vol;\n      } else if (data.freeze){\n        console.log(data.freeze);\n        if (streamVisualizer4Clients) streamVisualizer4Clients.setRAND(data.freeze);\n      } else if (data.gain){\n        console.log(data.gain);\n        if (streamVisualizer4Clients) streamVisualizer4Clients.setGAIN(data.gain);\n      } else if (data.fft){\n        console.log(data.fft);\n        if (streamVisualizer4Clients) streamVisualizer4Clients.setFFT_SIZE(Math.pow(2,data.fft));\n      } else {\n        flash('white');\n        if ((!context) || (context.state=='closed') ){ // TODO\n          console.log('context1');\n          context = new AudioContext();\n          let audioSender = rtcPeerConnection.getSenders().find((s) => s.track.kind === \"audio\");\n          audioSender.replaceTrack(myPeer.stream.getTracks()[0]);\n          let videoSender = rtcPeerConnection.getSenders().find((s) => s.track.kind === \"video\");\n          videoSender.replaceTrack(userCanvasStream.getTracks()[0]);\n        } else if (context.state == 'suspended') {\n          context.resume();\n        }\n        analyser.disconnect(0);\n        analyser.connect(context.destination);\n        gain.disconnect(0);\n        clearInterval(timer_nico);\n        try{\n            if (navigator.vibrate){ \n              timer_nico = setInterval(()=>{\n                navigator.vibrate([400, 0, 300, 0, 200, 0, 100].map(function(x) { return (x+200) * Math.random(); }));\n              }, 3000);\n            }\n          } catch (e) {\n            console.log(e);\n          }\n        // context.close();\n        // userCanvas.style.display = \"none\";\n        gain_nico.gain.value = 1.0;\n        // audio_nico.muted = false;\n        audio_nico.currentTime = 0;\n        audio_nico.play();\n        audio_nico.loop = true;\n        atablee.style.display = \"initial\";\n        userCanvas.style.display = \"initial\";\n        adminVideo.style.display = \"none\";\n        adminVideo.pause();\n        adminVideo.volume = 0;\n        adminVideo_webrtc.style.display = \"none\";\n        // adminVideo_webrtc.volume = 0;\n        adminVideo_webrtc.pause();\n        myGUI.style.display = \"none\";\n        audio_nico.addEventListener(\"ended\", (event) => {\n        flash('white');\n        });\n        if (!streamVisualizer4Clients) {\n          streamVisualizer4Clients = new StreamVisualizer4Clients(analyser, canvas);\n        } else {\n          streamVisualizer4Clients.stop();\n        }\n        streamVisualizer4Clients.start();\n        streamVisualizer4Clients.setStroke(true);\n        streamVisualizer4Clients.setSize(1000);\n        streamVisualizer4Clients.setFFT_SIZE(128);\n        streamVisualizer4Clients.setGAIN(10000);\n        overlay.style.visibility = \"hidden\";\n        overlayTHEEND.style.visibility = \"hidden\";\n        overlayWAIT.style.visibility = \"hidden\";\n        // btn_fullscreen.style.display = \"initial\";\n        // if (source_mic) try {source_mic.getTracks().forEach(function(track) {track.stop();});} catch(e) {console.log(e)};\n        // try {effects.forEach(e=>e.device = null) } catch (e){console.log(e)};\n        try {myPeer.stream.getTracks().forEach((track) => {track.stop()}) } catch(e) {console.log(e)};\n      }\n      break;\n      case 7:\n        overlay.style.visibility = \"hidden\";\n        overlayTHEEND.style.visibility = \"visible\";\n        overlayWAIT.style.visibility = \"hidden\";\n        atablee.style.display = \"none\";\n        myGUI.style.display = \"none\";\n        adminVideo.pause();\n        adminVideo.volume = 0;\n        adminVideo_webrtc.pause();\n        // adminVideo_webrtc.volume = 0;\n        audio_nico.pause();\n        try{myPeer.stream.getTracks().forEach((track) => {track.stop()});}catch(e){console.log(e)};\n        try{userCanvasStream.getTracks().forEach((track) => {track.stop()});}catch(e){console.log(e)};\n        // try{rtcPeerConnection.close(); rtcPeerConnection = null;}catch(e){console.log(e)};\n        if (source_mic) try{source_mic.getTracks().forEach(function(track) {track.stop();}); source_mic= null;}catch(e){console.log(e)};\n        try{context.suspend();}catch(e){console.log(e)};\n        document.getElementById(\"startButton\").classList.remove(\"spinner\");\n        document.getElementById(\"startButton\").disabled = false;\n        try{streamVisualizer4Clients.stop();}catch(e){console.log(e)};\n        break;\n    default :\n      console.log(\"No scene...\");\n      flash('red');\n  }\n}\n\nfunction onReceiveChannelStateChange() {\n  const readyState = receiveChannel.readyState;\n  console.log(`Receive channel state is: ${readyState}`);\n  if (readyState=='open') socket.disconnect();\n}\n\nfunction onSendChannelStateChange() {\n  const readyState = sendChannel.readyState;\n  console.log('Send channel state is: ' + readyState);\n  if (readyState == 'closed'){\n    goBackHome();\n    // alert('MINCE ! \\nTu as t dconnect !?');\n    location.reload();\n  }\n}\n\nfunction onSendChannelMessageCallback(event) {\n  console.log('Message sent');\n}\n\nfunction webrtcStateChange(ev){\n    switch(ev.currentTarget.connectionState) {\n      case \"new\":\n        console.log(\"New...\");\n        break;\n      case \"checking\":\n        console.log(\"Connecting\");\n        break;\n      case \"connected\":\n        console.log(\"Online\");\n        document.getElementById(\"startButton\").classList.remove(\"spinner\");\n        document.getElementById(\"startButton\").disabled = false;\n        break;\n      case \"disconnected\":\n        console.log(\"Disconnecting\");\n        goBackHome();\n        alert('MINCE ! \\nTu as t dconnect !?');\n        location.reload();\n        break;\n      case \"closed\":\n        goBackHome();\n        console.log(\"Offline\");\n        alert('MINCE ! \\nTu as t sorti du jeu ?!');\n        location.reload();\n        break;\n      case \"failed\":\n        console.log(\"Error\");\n        goBackHome();\n        alert('OUPS ! \\nEs-tu bien connect au wifi @TABLEE ?');\n        location.reload();\n        break;\n      default:\n        overlay.style.visibility = \"visible\";\n        overlayTHEEND.style.visibility = \"hidden\";\n        overlayWAIT.style.visibility = \"hidden\";\n        atablee.style.display = \"none\";\n        myGUI.style.display = \"none\";\n        adminVideo.pause();\n        adminVideo.volume = 0;\n        break;\n    }\n};\n\nfunction flash(color){\n  document.getElementById(\"adminID\").style.background = color;\n  document.getElementById(\"adminID\").style.visibility = \"visible\";\n  setTimeout(()=>document.getElementById(\"adminID\").style.visibility = \"hidden\", 300);\n}\n\nfunction goBackHome(){\n  overlay.style.visibility = \"visible\";\n  overlayTHEEND.style.visibility = \"hidden\";\n  overlayWAIT.style.visibility = \"hidden\";\n  atablee.style.display = \"none\";\n  myGUI.style.display = \"none\";\n  adminVideo.pause();\n  adminVideo.volume = 0;\n  adminVideo_webrtc.pause();\n  // adminVideo_webrtc.volume = 0;\n  try{myPeer.stream.getTracks().forEach((track) => {track.stop()});}catch(e){console.log(e)};\n  try{userCanvasStream.getTracks().forEach((track) => {track.stop()});}catch(e){console.log(e)};\n  try{rtcPeerConnection.close(); rtcPeerConnection = null;}catch(e){console.log(e)};\n  if (source_mic) try{source_mic.getTracks().forEach(function(track) {track.stop();}); source_mic= null;}catch(e){console.log(e)};\n  try{context.suspend();}catch(e){console.log(e)};\n  document.getElementById(\"startButton\").classList.remove(\"spinner\");\n  document.getElementById(\"startButton\").disabled = false;\n  try{streamVisualizer4Clients.stop();}catch(e){console.log(e)};\n}\n\nconst requestWakeLock = async () => {\n  try {\n    wakeLock = await navigator.wakeLock.request('screen');\n    wakeLock.addEventListener('release', () => {\n      console.log('Wake Lock was released');\n    });\n    console.log('Wake Lock is active');\n  } catch (err) {\n    console.log(`${err.name}, ${err.message}`);\n    try {\n      noSleep.enable();\n    } catch (err) {\n      alert('Impossible de couper la veille automatiquement !')\n    }\n  }\n};\n\ndocument.addEventListener(\"visibilitychange\", (event) => {\n\n  try{\n    if ((context)&&(context.state != 'closed')){\n      if (document.visibilityState === \"visible\") {\n        context.resume();\n      } else {\n        context.suspend();\n      }\n    }\n  } catch (err){\n    console.log(err);\n  }\n  if (document.visibilityState === \"visible\") {\n    requestWakeLock();\n  } else {\n    btn_fullscreen.style.backgroundColor = \"transparent\";\n    document.getElementById(\"fs1\").style.display = 'inline-block';\n    document.getElementById(\"fs2\").style.display = 'none';\n  }\n});\n\nfunction changeFullScreen(){\n  try {\n    fullscreenElement = document.fullscreenElement || document.webkitFullscreenElement;\n    if (fullscreenElement !== undefined){\n      if (!fullscreenElement)\n      {\n          if(document.documentElement.requestFullscreen)\n          {\n            document.documentElement.requestFullscreen();\n            btn_fullscreen.style.backgroundColor = \"#5c5c5c\";\n            document.getElementById(\"fs2\").style.display = 'inline-block';\n            document.getElementById(\"fs1\").style.display = 'none';\n          }\n          else if(document.documentElement.webkitRequestFullscreen)\n          {\n            document.documentElement.webkitRequestFullscreen();\n            btn_fullscreen.style.backgroundColor = \"#5c5c5c\";\n            document.getElementById(\"fs2\").style.display = 'inline-block';\n            document.getElementById(\"fs1\").style.display = 'none';\n          }\n      }\n      else\n      {\n          if(document.exitFullscreen)\n          {\n              document.exitFullscreen();\n              btn_fullscreen.style.backgroundColor = \"transparent\";\n              document.getElementById(\"fs1\").style.display = 'inline-block';\n              document.getElementById(\"fs2\").style.display = 'none';\n          }\n          else if(document.webkitExitFullscreen)\n          {\n              document.webkitExitFullscreen();\n              btn_fullscreen.style.backgroundColor = \"transparent\";\n              document.getElementById(\"fs1\").style.display = 'inline-block';\n              document.getElementById(\"fs2\").style.display = 'none';\n          }\n      }\n    }\n  } catch(e) { console.log(e) }\n}\n\n// function goFullScreen(){\n//   fullscreenElement = document.fullscreenElement || document.webkitFullscreenElement;\n//   if (fullscreenElement !== undefined){\n//     if (!fullscreenElement)\n//     {\n//         if(document.documentElement.requestFullscreen)\n//         {\n//           document.documentElement.requestFullscreen();\n//           btn_fullscreen.style.backgroundColor = \"#5c5c5c\";\n//           document.getElementById(\"fs2\").style.display = 'inline-block';\n//           document.getElementById(\"fs1\").style.display = 'none';\n//         }\n//         else if(document.documentElement.webkitRequestFullscreen)\n//         {\n//           document.documentElement.webkitRequestFullscreen();\n//           btn_fullscreen.style.backgroundColor = \"#5c5c5c\";\n//           document.getElementById(\"fs2\").style.display = 'inline-block';\n//           document.getElementById(\"fs1\").style.display = 'none';\n//         }\n//     }\n//   }\n// }\n\nasync function effects_Setup(effects) {\n  let response, patcher;\n  await loadRNBOScript(\"1.2.3\");\n  for (let i=0; i<effects.length; i++){\n    if (window.matchMedia(\"(orientation: portrait)\").matches){\n      document.getElementById(\"loading-bar\").style.transform = `scaleY(${(i+1)/effects.length})`;\n    }  else {\n      document.getElementById(\"loading-bar\").style.transform = `scaleX(${(i+1)/effects.length})`;\n    }\n    try {\n        response = await fetch(\"./effects/\" + effects[i].name + \".export.json\");\n        patcher = await response.json();\n\n    } catch (err) {\n        const errorContext = {\n            error: err\n        };\n        if (response && (response.status >= 300 || response.status < 200)) {\n            errorContext.header = `Couldn't load patcher export bundle`,\n            errorContext.description = `Check app.js to see what file it's trying to load. Currently it's` +\n            ` trying to load \"${patchExportURL}\". If that doesn't` + \n            ` match the name of the file you exported from RNBO, modify` + \n            ` patchExportURL in app.js.`;\n        }\n        if (typeof guardrails === \"function\") {\n            guardrails(errorContext);\n        } else {\n            throw err;\n        }\n        return;\n    }\n  \n    // (Optional) Fetch the dependencies\n    // let dependencies = [];\n    // try {\n    //     const dependenciesResponse = await fetch(`./effects/${effects[i].name}_dependencies.json`);\n    //     dependencies = await dependenciesResponse.json();\n    //     // Prepend \"export\" to any file dependenciies\n    //     dependencies = dependencies.map(d => d.file ? Object.assign({}, d, { file: \"./effects/\" + d.file }) : d);\n    // } catch (e) {\n    //   console.log('No dependencies in : ' + effects[i].name);\n    // }\n\n    // Create the device\n    try {\n        effects[i].device = await RNBO.createDevice({ context, patcher });\n    } catch (err) {\n        alert('err');\n    }\n\n    // if (dependencies.length)\n    //   await effects[i].device.loadDataBufferDependencies(dependencies);\n\n    // attachOutports(effects[i].device);\n\n    effects[i].gain = context.createGain();\n    effects[i].gain.gain.value = 1.0;\n    // Connect the device to the web audio graph\n    effects[i].device.node.connect(effects[i].gain);\n\n    if (effects[i].visible){\n      makeGUI(effects[i].device, effects[i].userParams, effects[i].title, effects[i].activ);\n    } else if (effects[i].name == \"sampler\"){\n      makeSamplerGUI(effects[i].device, effects[i].userParams, effects[i].title, effects[i].activ);\n    }\n\n  };\n}\n\nasync function filter_Setup(filter) {\n  let response, patcher;\n  try {\n      response = await fetch(\"./effects/\" + filter.name + \".export.json\");\n      patcher = await response.json();\n      //if (!window.RNBO) {\n          // Load RNBO script dynamically\n          // Note that you can skip this by knowing the RNBO version of your patch\n          // beforehand and just include it using a <script> tag\n          await loadRNBOScript(patcher.desc.meta.rnboversion); // TOBACK\n          console.log(patcher.desc.meta.rnboversion);\n      //}\n\n  } catch (err) {\n    const errorContext = {\n        error: err\n    };\n    if (response && (response.status >= 300 || response.status < 200)) {\n        errorContext.header = `Couldn't load patcher export bundle`,\n        errorContext.description = `Check app.js to see what file it's trying to load. Currently it's` +\n        ` trying to load \"${patchExportURL}\". If that doesn't` + \n        ` match the name of the file you exported from RNBO, modify` + \n        ` patchExportURL in app.js.`;\n    }\n    if (typeof guardrails === \"function\") {\n        guardrails(errorContext);\n    } else {\n        throw err;\n    }\n    return;\n  }\n  \n  // (Optional) Fetch the dependencies\n  // let dependencies = [];\n  // try {\n  //     const dependenciesResponse = await fetch(`./effects/${effects[i].name}_dependencies.json`);\n  //     dependencies = await dependenciesResponse.json();\n  //     // Prepend \"export\" to any file dependenciies\n  //     dependencies = dependencies.map(d => d.file ? Object.assign({}, d, { file: \"./effects/\" + d.file }) : d);\n  // } catch (e) {\n  //   console.log('No dependencies in : ' + effects[i].name);\n  // }\n\n  // Create the device\n  try {\n    filter.device = await RNBO.createDevice({ context, patcher });\n  } catch (err) {\n    alert('err');\n  }\n\n  // if (dependencies.length)\n  //   await effects[i].device.loadDataBufferDependencies(dependencies);\n\n  // attachOutports(effects[i].device);\n\n  filter.gain = context.createGain();\n  filter.gain.gain.value = 1.0;\n  // Connect the device to the web audio graph\n  filter.device.node.connect(filter.gain);\n}\n\nfunction loadRNBOScript(version) {\n  return new Promise((resolve, reject) => {\n      if (/^\\d+\\.\\d+\\.\\d+-dev$/.test(version)) {\n          throw new Error(\"Patcher exported with a Debug Version!\\nPlease specify the correct RNBO version to use in the code.\");\n      }\n      const el = document.createElement(\"script\");\n      \n      el.src = \"https://c74-public.nyc3.digitaloceanspaces.com/rnbo/\" + encodeURIComponent(version) + \"/rnbo.min.js\";\n      \n      el.onload = resolve;\n      el.onerror = function(err) {\n          console.log(err);\n          reject(new Error(\"Failed to load rnbo.js v\" + version));\n      };\n      document.body.append(el);\n  });\n}\n\n// function attachOutports(device) {\n//   try{\n//     const outports = device.outports;\n//     if (outports.length < 1) {\n//         return;\n//     }\n\n//     device.messageEvent.subscribe((ev) => {\n\n//         // Ignore message events that don't belong to an outport\n//         if (outports.findIndex(elt => elt.tag === ev.tag) < 0) return;\n\n//         // Message events have a tag as well as a payload\n//         // console.log(`${ev.tag}: ${ev.payload}`);\n//         if (ev.tag == 'gain_1'){\n//           document.getElementById(\"adminID\").style.visibility = \"visible\";\n//           setTimeout(()=>document.getElementById(\"adminID\").style.visibility = \"hidden\", 300);\n//         }\n//     });\n//   } catch(e) {alert(e)};\n// }\n\nfunction makeGUI(device, userParams, effect_title, effect_activ) {\n  let effect_div = document.createElement(\"div\");\n  effect_div.setAttribute(\"class\", \"effect_div\")\n  let pdiv = document.getElementById(\"effects-params\");\n  pdiv.appendChild(effect_div);\n  // This will allow us to ignore parameter update events while dragging the slider.\n  // let uiElements = {};\n  \n  // ON/OFF BOUTON :\n  //param_input.value = 1.0;\n  let sliderContainer = document.createElement(\"div\");\n\n  let label = document.createElement(\"label\");\n  let input = document.createElement(\"input\");\n  let div = document.createElement(\"div\");\n  let span = document.createElement(\"span\");\n  label.setAttribute(\"class\", \"toggle\");\n  input.setAttribute(\"class\", \"toggle-checkbox\");\n  input.setAttribute(\"type\", \"checkbox\");\n  div.setAttribute(\"class\", \"toggle-switch\");\n  span.setAttribute(\"class\", \"toggle-label\");\n  span.textContent = effect_title;\n  label.appendChild(input);\n  label.appendChild(div);\n  label.appendChild(span);\n  input.setAttribute(\"id\", effect_title);\n  input.checked = effect_activ;\n  input.onchange = onoffEffect;\n  sliderContainer.appendChild(label);\n\n  effect_div.appendChild(sliderContainer);\n\n  userParams.forEach((userParam)=>{\n    let param = device.parameters.find(t=>t.name==userParam.name);\n    if (userParam.defaultValue!==null){\n      param.value = userParam.defaultValue;\n    } else {\n      userParam.defaultValue = param.value;\n    };\n    if (userParam.visible){\n      // PARAMS :\n      let paramGUI = createParamGUI(param, effect_title, userParam.type, effect_activ);\n      \n      // Store the slider and text by name so we can access them later\n      let slider = paramGUI.slider;\n      // uiElements[param.id] = { slider };\n      \n      // Add the slider element\n      effect_div.appendChild(paramGUI.sliderContainer);\n    };\n  });\n\n  // Listen to parameter changes from the device\n  // autoChangeGUI(device, uiElements);\n}\n\nfunction makeSamplerGUI(device, userParams, effect_title, effect_activ) {\n  let effect_div = document.createElement(\"div\");\n  effect_div.setAttribute(\"class\", \"effect_div\");\n  effect_div.setAttribute(\"id\", \"sampler_div\");\n  effect_div.style.display = \"none\";\n  let pdiv = document.getElementById(\"effects-params\");\n  pdiv.appendChild(effect_div);\n  // This will allow us to ignore parameter update events while dragging the slider.\n  // let uiElements = {};\n\n  userParams.forEach((userParam)=>{\n    let param = device.parameters.find(t=>t.name==userParam.name);\n    if (userParam.defaultValue!==null){\n      param.value = userParam.defaultValue;\n    } else {\n      userParam.defaultValue = param.value;\n    };\n\n    if (userParam.visible){\n      let sliderContainer = document.createElement(\"div\");\n\n      let label = document.createElement(\"label\");\n      let input = document.createElement(\"input\");\n      let div = document.createElement(\"div\");\n      let span = document.createElement(\"span\");\n      label.setAttribute(\"class\", \"toggle\");\n      input.setAttribute(\"class\", \"toggle-checkbox\");\n      input.setAttribute(\"type\", \"checkbox\");\n      div.setAttribute(\"class\", \"toggle-switch\");\n      span.setAttribute(\"class\", \"toggle-label\");\n      span.textContent = userParam.title;\n      label.appendChild(input);\n      label.appendChild(div);\n      label.appendChild(span);\n      input.setAttribute(\"id\", userParam.name);\n      input.checked = effect_activ;\n      input.onchange = onoffSampler;\n      sliderContainer.appendChild(label);\n    \n      effect_div.appendChild(sliderContainer);\n\n      if (userParam.type !== \"bool\"){\n        // PARAMS :\n        let paramGUI = createParamGUI(param, param.name, userParam.type, effect_activ);\n        // Store the slider and text by name so we can access them later\n        let slider = paramGUI.slider;\n        // uiElements[param.id] = { slider };\n        // Add the slider element\n        effect_div.appendChild(paramGUI.sliderContainer);\n      }\n    };\n  });\n  // Listen to parameter changes from the device\n  // autoChangeGUI(device, uiElements);\n\n}\n\nfunction createParamGUI(param, effect_title, type, activ){\n  let sliderContainer = document.createElement(\"div\");\n  sliderContainer.setAttribute(\"name\", effect_title + \"div\");\n  sliderContainer.setAttribute(\"class\", \"div_slider\");\n  if (activ){\n    sliderContainer.style.display = \"flex\";\n  } else {\n    sliderContainer.style.display = \"none\";\n  };\n  let label = document.createElement(\"label\");\n  let slider = document.createElement(\"input\");\n  sliderContainer.appendChild(slider);\n  // Add a name for the label\n  label.setAttribute(\"name\", param.name);\n  label.setAttribute(\"for\", param.name);\n  label.setAttribute(\"class\", \"param-label\");\n  label.textContent = `${param.name}`;\n\n  if (type == \"bool\"){\n\n    slider.setAttribute(\"type\", \"checkbox\");\n    slider.setAttribute(\"class\", \"param-checkbox\");\n    slider.setAttribute(\"id\", param.id);\n    slider.setAttribute(\"name\", param.name);\n    slider.checked = (param.value = param.max) ? true : false;\n    slider.addEventListener(\"change\", () => {\n      param.value = (slider.checked) ? param.max : param.min;\n    });\n\n  } else {\n\n    // Make each slider reflect its parameter\n    slider.setAttribute(\"type\", \"range\");\n    slider.setAttribute(\"class\", \"param-slider\");\n    slider.setAttribute(\"id\", param.id);\n    slider.setAttribute(\"name\", param.name);\n    slider.setAttribute(\"min\", param.min);\n    slider.setAttribute(\"max\", param.max);\n    if (param.steps > 1) {\n        slider.setAttribute(\"step\", (param.max - param.min) / (param.steps - 1));\n    } else {\n        slider.setAttribute(\"step\", (param.max - param.min) / 1000.0);\n    }\n    slider.setAttribute(\"value\", param.value);\n\n    // Make each slider control its parameter\n    slider.addEventListener(\"pointerdown\", () => {\n        isDraggingSlider = true;\n    });\n    slider.addEventListener(\"pointerup\", () => {\n        isDraggingSlider = false;\n        slider.value = param.value;\n    });\n    slider.addEventListener(\"input\", () => {\n        let value = Number.parseFloat(slider.value);\n        param.value = value;\n      });\n\n  }\n  return {sliderContainer, slider};\n}\n\nfunction removeAllChildNodes(parent) {\n  while (parent.firstChild) {\n      parent.removeChild(parent.firstChild);\n  }\n}\n\nfunction onoffEffect(ev){\n   effects.find(t=>t.title===ev.target.id).activ = ev.target.checked;\n   if (!ev.target.checked){\n    // TODO INITIALISATION\n   }\n   nodeConnection(\"auto\");\n   const divs = document.getElementsByName(ev.target.id+\"div\");\n   divs.forEach((div) => {\n    div.style.display = (ev.target.checked) ? \"flex\" : \"none\";\n   })\n}\n\nfunction onoffSampler(ev){\n  switch (ev.target.id){\n    case \"metro_speed\":\n      let sampler = effects.find(t=>t.name == \"sampler\");\n      if (!ev.target.checked){\n        sampler.device.parameters.find(param=>param.name==\"rand_play\").value = 1.0;\n        sampler.device.parameters.find(param=>param.name==\"loop_start_point\").value = 1.0;\n        setTimeout(()=>{\n          sampler.device.parameters.find(param=>param.name==\"loop_start_point\").value = 0.0;\n        }, 100.0);\n      } else {\n        sampler.device.parameters.find(param=>param.name==\"rand_play\").value = 0.0;\n      }\n      break;\n    default:\n      if (!ev.target.checked){\n        let sampler = effects.find(t=>t.name == \"sampler\")\n        sampler.device.parameters.find(t=>t.name == ev.target.id).value = sampler.userParams.find(t=>t.name == ev.target.id).defaultValue;\n      }\n      break;\n  }\n  const divs = document.getElementsByName(ev.target.id+\"div\");\n  divs.forEach((div) => {\n   div.style.display = (ev.target.checked) ? \"flex\" : \"none\";\n  })\n}\n\n// function autoChangeGUI(device, uiElements){\n//   device.parameterChangeEvent.subscribe(param => {\n//     if (!isDraggingSlider){\n//       try{\n//           uiElements[param.id].slider.value = param.value;\n//       } catch (err){\n//         console.log('UIELEMENTS err');\n//         console.log(err);\n//       }\n//     }\n//   });\n// }\n\nfunction nodeConnection(mode){ // TODO\n  filter.gain.disconnect(0);\n  analyser.disconnect(0);\n  gain.disconnect(0);\n  effects.filter(t=>t.activ==false).forEach((effect)=>{effect.gain.disconnect(0)});\n  let f_effects = effects.filter(t=>t.activ==true);\n  if (f_effects.length == 0){\n    filter.gain.connect(gain);\n  } else if (f_effects.length == 1){\n    f_effects[0].gain.connect(gain);\n    filter.gain.connect(f_effects[0].device.node);\n  } else {\n    f_effects[0].gain.connect(gain);\n    for (let i = 1; i < f_effects.length; i++){\n      f_effects[i].gain.connect(f_effects[i-1].device.node);\n    }\n    filter.gain.connect(f_effects[f_effects.length-1].device.node);\n  };\n  gain.connect(analyser);\n  analyser.connect(myPeer);\n  // analyser.connect(context.destination);\n}\n\nlet recTimeCount = 0;\nfunction recfunction(ev){\n  let sampler = effects.find(t=>t.name == \"sampler\");\n  if ((btn_rec.style.backgroundColor == \"transparent\") && (recTimeCount==0)){\n    streamVisualizer4Clients.setColor(\"red\");\n    recTimeCount = Date.now();\n    btn_rec.style.backgroundColor = \"#FF0000\";\n    effectsPan.style.display = \"none\";\n    gainPan.style.display = \"none\";\n    btn_effects.style.background = \"transparent\";\n    sampler.activ = true;\n    sampler.device.parameters.find(param=>param.name==\"size\").value = sampler.userParams.find(t=>t.name == \"size\").defaultValue;\n    sampler.device.parameters.find(param=>param.name==\"clear_buf\").value = 1.0;\n    sampler.device.parameters.find(param=>param.name==\"rec\").value = 1.0;\n    document.getElementById(\"sampler_div\").style.display = \"flex\";\n    rec.style.display = \"none\";\n    trash.style.display = \"none\";\n    mystop.style.display = \"inline\";\n    filter.gain.disconnect(0);\n    analyser.disconnect(0);\n    effects.forEach((effect)=>{effect.gain.disconnect()});\n    filter.gain.connect(analyser);\n    analyser.connect(sampler.device.node);\n    sampler.gain.connect(myPeer);\n\n    timer_rec = setTimeout(()=>{\n      sampler.gain.disconnect();\n      streamVisualizer4Clients.setColor(\"white\");\n      sampler.device.parameters.find(param=>param.name==\"rand_play\").value = 1.0;\n      sampler.device.parameters.find(param=>param.name==\"out_gain\").value = 1.0;\n      sampler.device.parameters.find(param=>param.name==\"loop_start_point\").value = 0.0;\n      sampler.device.parameters.find(param=>param.name==\"rec\").value = 0.0;\n      btn_rec.style.backgroundColor = \"#5c5c5c\";\n      rec.style.display = \"none\";\n      trash.style.display = \"inline\";\n      mystop.style.display = \"none\";\n      recTimeCount = 0;\n      document.getElementById(\"metro_speed\").checked = false;\n      const divs = document.getElementsByName(\"metro_speeddiv\");\n      divs.forEach((div) => {\n       div.style.display = \"none\";\n      });\n      nodeConnection(\"auto\");\n    }, sampler.device.parameters.find(param=>param.name==\"size\").value * 1000.0);\n  } else if (recTimeCount != 0){\n    sampler.gain.disconnect();\n    streamVisualizer4Clients.setColor(\"white\");\n    rec.style.display = \"none\";\n    trash.style.display = \"inline\";\n    mystop.style.display = \"none\";\n    clearTimeout(timer_rec);\n    sampler.device.parameters.find(param=>param.name==\"size\").value = Math.floor((Date.now()-recTimeCount)/1000);\n    setTimeout(()=>{\n      sampler.device.parameters.find(param=>param.name==\"rand_play\").value = 1.0;\n      sampler.device.parameters.find(param=>param.name==\"out_gain\").value = 1.0;\n      sampler.device.parameters.find(param=>param.name==\"loop_start_point\").value = 0.0;\n      sampler.device.parameters.find(param=>param.name==\"rec\").value = 0.0;\n      btn_rec.style.backgroundColor = \"#5c5c5c\";\n      rec.style.display = \"none\";\n      trash.style.display = \"inline\";\n      mystop.style.display = \"none\";\n      recTimeCount = 0;\n      document.getElementById(\"metro_speed\").checked = false;\n      const divs = document.getElementsByName(\"metro_speeddiv\");\n      divs.forEach((div) => {\n       div.style.display = \"none\";\n      });\n      nodeConnection(\"auto\");\n    }, 100.0);\n  } else {\n    streamVisualizer4Clients.setColor(\"white\");\n    sampler.gain.disconnect();\n    recTimeCount = 0;\n    clearTimeout(timer_rec);\n    rec.style.display = \"inline\";\n    trash.style.display = \"none\";\n    mystop.style.display = \"none\";\n    document.getElementById(\"sampler_div\").style.display = \"none\";\n    sampler.activ = false;\n    sampler.device.parameters.find(param=>param.name==\"rec\").value = 0.0;\n    sampler.device.parameters.find(param=>param.name==\"clear_buf\").value = 1.0;\n    sampler.device.parameters.find(param=>param.name==\"out_gain\").value = 0.0;\n    //sampler.device.parameters.find(param=>param.name==\"rand_play\").value = 0.0;\n    sampler.device.parameters.find(param=>param.name==\"loop_start_point\").value = 0.0;\n    sampler.device.parameters.find(param=>param.name==\"clear_buf\").value = 1.0;\n    btn_rec.style.background = \"transparent\";\n\n    document.getElementById(\"metro_speed\").checked = false;\n    const divs = document.getElementsByName(\"metro_speeddiv\");\n    divs.forEach((div) => {\n     div.style.display = \"none\";\n    });\n    nodeConnection(\"auto\");\n  }\n  sampler.device.parameters.find(param=>param.name==\"loop_start_point\").value = 1.0;\n  //nodeConnection(\"auto\");\n}\n"],"names":["media","webm","mp4","require$$0","oldIOS","nativeWakeLock","NoSleep","handleVisibilityChange","element","type","dataURI","source","wakeLock","err","res","src","PACKET_TYPES","PACKET_TYPES_REVERSE","key","ERROR_PACKET","withNativeBlob","withNativeArrayBuffer","isView","obj","encodePacket","data","supportsBinary","callback","encodeBlobAsBase64","fileReader","content","toArray","TEXT_ENCODER","encodePacketToBinary","packet","encoded","chars","lookup","i","decode","base64","bufferLength","len","p","encoded1","encoded2","encoded3","encoded4","arraybuffer","bytes","decodePacket","encodedPacket","binaryType","mapBinary","decodeBase64Packet","decoded","SEPARATOR","encodePayload","packets","length","encodedPackets","count","decodePayload","encodedPayload","decodedPacket","createPacketEncoderStream","controller","payloadLength","header","view","TEXT_DECODER","totalLength","chunks","acc","chunk","concatChunks","size","buffer","j","createPacketDecoderStream","maxPayload","state","expectedLength","isBinary","headerArray","n","protocol","Emitter","mixin","event","fn","on","callbacks","cb","args","globalThisShim","pick","attr","k","NATIVE_SET_TIMEOUT","globalThis","NATIVE_CLEAR_TIMEOUT","installTimerFunctions","opts","BASE64_OVERHEAD","byteLength","utf8Length","str","c","l","encode","qs","qry","pairs","pair","TransportError","reason","description","context","Transport","details","onPause","schema","query","hostname","encodedQuery","alphabet","map","seed","prev","num","yeast","now","value","hasCORS","XHR","xdomain","empty","hasXHR2","XMLHttpRequest","Polling","isSSL","port","forceBase64","pause","total","close","Request","req","xhrStatus","uri","_a","xhr","e","fromError","unloadHandler","terminationEvent","nextTick","setTimeoutFn","WebSocket","usingBrowserWebSocket","defaultBinaryType","isReactNative","WS","protocols","closeEvent","ev","lastPacket","WT","stream","decoderStream","reader","encoderStream","read","done","transports","re","parts","parse","b","m","pathNames","queryKey","path","regx","names","$0","$1","$2","Socket","name","transport","failed","onTransportOpen","msg","cleanup","freezeTransport","onerror","error","onTransportClose","onclose","onupgrade","to","payloadSize","options","cleanupAndClose","waitForUpgrade","upgrades","filteredUpgrades","url","loc","host","toString","withNativeFile","hasBinary","toJSON","deconstructPacket","buffers","packetData","pack","_deconstructPacket","placeholder","newData","reconstructPacket","_reconstructPacket","RESERVED_EVENTS","PacketType","Encoder","replacer","deconstruction","isObject","Decoder","reviver","isBinaryEvent","BinaryReconstructor","start","buf","next","payload","binData","io","nsp","id","ack","isTransportWritable","timeout","timer","resolve","reject","arg1","arg2","responseArgs","force","listeners","listener","self","sent","pid","subDestroy","compress","Backoff","ms","rand","deviation","min","max","jitter","Manager","_parser","parser","v","Engine","socket","openSubDestroy","onError","errorSub","nsps","delay","attempt","cache","parsed","sameNamespace","newConnection","SMOOTHING","StreamVisualizer4Clients","analyser","canvas","col","gain","goStroke","FFT_SIZE","meanVal","barWidth","y","userCanvas","adminVideo","adminVideo_webrtc","audio_nico","effectsPan","gainPan","BtnsPan","overlay","overlayTHEEND","overlayWAIT","myGUI","atablee","btn_fullscreen","fullscreenElement","btn_gain","btn_rec","recfunction","rec","mystop","trash","btn_effects","changeFullScreen","startButton","init","goBackHome","adminID","rtcPeerConnection","sendChannel","myID","streamVisualizer4Clients","roomName","receiveChannel","userCanvasStream","noSleep","AudioContext","source_mic","myPeer","audio_nico_source","timer_rec","timer_nico","gain_nico","effects_loaded","filter","effects","iceServers","offerOptions","constraints","requestWakeLock","OnIceCandidateFunction","OnTrackFunction","onSendChannelStateChange","onSendChannelMessageCallback","receiveChannelCallback","webrtcStateChange","offer","answer","candidate","icecandidate","onReceiveChannelMessageCallback","onReceiveChannelStateChange","changeScene","track","s","getUserMedia","nodeConnection","removeAllChildNodes","effects_Setup","filter_Setup","audioTracks","x","flash","readyState","color","response","patcher","loadRNBOScript","errorContext","makeGUI","makeSamplerGUI","version","el","device","userParams","effect_title","effect_activ","effect_div","sliderContainer","label","input","div","span","onoffEffect","userParam","param","t","paramGUI","createParamGUI","onoffSampler","activ","slider","parent","sampler","mode","effect","f_effects","recTimeCount"],"mappings":"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CD,CACE,KAAM,aACN,MAAO,cACP,OAAQ,KACR,IAAK,KACL,MAAO,GACP,QAAS,GACT,KAAM,KACN,WAAY,CACZ,CACE,KAAM,cACN,MAAO,cACP,aAAc,GACd,MAAO,KACP,QAAS,GACT,KAAM,MACZ,CAAK,CACF,EACD,CACE,KAAM,SACN,MAAO,gBACP,OAAQ,KACR,IAAK,KACL,MAAO,GACP,QAAS,GACT,KAAM,KACN,WAAY,CACV,CACE,KAAM,QACN,MAAO,QACP,aAAc,KACd,MAAO,KACP,QAAS,GACT,KAAM,MACd,EAAQ,CACA,KAAM,MACN,MAAO,MACP,aAAc,IACd,MAAO,KACP,QAAS,GACT,KAAM,MACP,CACF,CACF,EACD,CACG,KAAM,aACN,MAAO,UACP,OAAQ,KACR,IAAK,KACL,MAAO,GACP,QAAS,GACT,KAAM,KACN,WAAY,CACV,CACE,KAAM,SACN,MAAO,gBACP,aAAc,KACd,MAAO,KACP,QAAS,GACT,KAAM,MACP,EACD,CACE,KAAM,MACN,MAAO,MACP,aAAc,IACd,MAAO,KACP,QAAS,GACT,KAAM,MACP,CACF,CACF,EACF,CACE,KAAM,SACN,MAAO,gBACP,OAAQ,KACR,IAAK,KACL,MAAO,GACP,QAAS,GACT,KAAM,KACN,WAAY,CACV,CACE,KAAM,OACN,MAAO,OACP,aAAc,IACd,MAAO,KACP,QAAS,GACT,KAAM,MACP,CACF,CACF,EACD,CACE,KAAM,UACN,MAAO,UACP,OAAQ,KACR,IAAK,KACL,MAAO,GACP,QAAS,GACT,KAAM,KACN,WAAY,CACV,CACE,KAAM,QACN,MAAO,UACP,aAAc,EACd,MAAO,KACP,QAAS,GACT,KAAM,MACP,EACD,CACE,KAAM,cACN,MAAO,oBACP,aAAc,KACd,MAAO,KACP,QAAS,GACT,KAAM,MACP,EACD,CACE,KAAM,OACN,MAAO,OACP,aAAc,GACd,MAAO,KACP,QAAS,GACT,KAAM,MACd,CAAO,CACJ,CACH,EAGA,IAAIC,GAAa,CACf,WAAY,CACV,CAAE,KAAM,gCAAkC,EAC1C,CAAE,KAAM,8BAAgC,CACzC,CACH,EAWA,M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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]}